# 港股通选股系统使用说明

## 系统已创建完成

量化选股系统已经创建完成，包含以下功能：

1. **数据获取模块** (`data_fetcher.py`) - 支持A股和港股数据获取
2. **评分系统** (`score_system.py`) - 基于基本面、成长性、波动率、市值评分
3. **交易策略** (`trading_strategy.py`) - 实现上升趋势策略
4. **港股通选股脚本** (`select_hgt_stocks_manual.py`) - 专门用于港股通选股

## 重要提示

### API速率限制

由于免费数据源（yfinance、akshare）有API速率限制，运行选股系统时请注意：

1. **延时设置**：代码中已添加延时（每次请求间隔1秒），但可能仍会遇到速率限制
2. **建议**：
   - 分批处理股票（每次处理10-20只）
   - 在网络较好的时段运行
   - 如果遇到速率限制，等待一段时间后重试
   - 考虑使用付费数据源（如Tushare Pro）获取更稳定的数据

### 运行方式

#### 方式1：使用预设港股通股票列表（推荐）

```bash
cd /Users/user/Downloads/quant_stock_selector
python3 select_hgt_stocks_manual.py
```

这个脚本使用预设的30只常见港股通股票，会从中选出评分最高的10只。

#### 方式2：自动获取港股通列表

```bash
python3 select_hgt_stocks.py
```

这个脚本会尝试从网络获取港股通股票列表（可能因网络问题失败）。

#### 方式3：快速测试

```bash
python3 quick_test.py
```

只处理5只股票进行快速验证。

## 输出文件

运行完成后，结果会保存在 `output/` 目录：

- `hgt_selected_stocks_YYYYMMDD_HHMMSS.xlsx` - 选出的10只股票及详细评分
- `hgt_backtest_results_YYYYMMDD_HHMMSS.xlsx` - 策略回测结果

## 评分标准

- **基本面（30%）**：PE、PB、ROE
- **成长性（30%）**：营收增长率、利润增长率  
- **波动率（20%）**：适合趋势策略的波动率范围（15-30%最佳）
- **市值（20%）**：市值大于50亿

## 交易策略

1. **持有**：高点越来越高
2. **清仓**：跌破前一日低点
3. **K线过滤**：处理包含关系

## 如果遇到问题

1. **速率限制**：等待5-10分钟后重试，或减少处理的股票数量
2. **网络问题**：检查网络连接，或使用VPN
3. **数据缺失**：某些股票可能无法获取完整数据，系统会自动跳过

## 下一步

系统已经可以运行，但由于API限制，建议：

1. 在网络较好的时段运行
2. 分批处理股票
3. 考虑使用付费数据源以获得更稳定的服务

系统代码已经完整实现，所有功能都已就绪！


