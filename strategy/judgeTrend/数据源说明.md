# 数据源说明

## 推荐的数据源（按稳定性排序）

### 1. **Tushare（最推荐）⭐⭐⭐⭐⭐**

**优点：**
- ✅ 数据最稳定，服务器稳定可靠
- ✅ 数据质量高，更新及时
- ✅ 支持A股和港股指数数据
- ✅ API调用稳定，不易被限流

**缺点：**
- ❌ 需要注册账号并获取token（免费版即可使用）
- ❌ 免费版有积分限制，但指数数据通常不受限

**获取方式：**
1. 访问 https://tushare.pro/register?reg=1 注册账号
2. 登录后获取token
3. 使用方式：
   ```bash
   python3 main.py --market all --tushare-token YOUR_TOKEN
   ```
   或设置环境变量：
   ```bash
   export TUSHARE_TOKEN=YOUR_TOKEN
   python3 main.py --market all
   ```

**免费版限制：**
- 每日可调用一定次数（通常足够使用）
- 指数数据一般不受限制

---

### 2. **akshare（免费但可能不稳定）⭐⭐⭐**

**优点：**
- ✅ 完全免费，无需注册
- ✅ 数据源丰富

**缺点：**
- ❌ 服务器可能不稳定，容易出现连接中断
- ❌ 没有官方维护，接口可能随时变更
- ❌ 可能被限流

**使用方式：**
- 如果不提供Tushare token，系统会自动使用akshare

---

### 3. **yfinance（港股备用）⭐⭐⭐**

**优点：**
- ✅ 免费使用
- ✅ 数据质量较好

**缺点：**
- ❌ 容易被限流（Too Many Requests）
- ❌ 需要较长的等待时间

**使用方式：**
- 系统会自动使用yfinance作为港股的备用数据源

---

## 数据源优先级

系统会按以下优先级自动选择数据源：

### A股指数：
1. **Tushare**（如果提供了token）
2. **akshare**（备用）

### 港股指数：
1. **Tushare**（如果提供了token）
2. **yfinance**（备用）

---

## 使用建议

### 方案1：使用Tushare（推荐）
```bash
# 安装依赖
pip install -r requirements.txt

# 使用Tushare token运行
python3 main.py --market all --tushare-token YOUR_TOKEN
```

### 方案2：使用免费数据源
```bash
# 直接运行，系统会自动使用akshare和yfinance
python3 main.py --market all
# 注意：如果遇到网络问题，可能需要多次重试
```

### 方案3：设置环境变量
```bash
# 设置Tushare token
export TUSHARE_TOKEN=YOUR_TOKEN

# 运行程序
python3 main.py --market all
```

---

## 其他数据源选项

如果以上数据源都无法使用，可以考虑：

1. **聚宽（JoinQuant）**：需要注册，提供Python API
2. **米筐（RiceQuant）**：需要注册，提供Python API
3. **Wind/同花顺**：商业软件，需要付费
4. **自建数据源**：从交易所官网爬取数据

---

## 故障排查

### 问题1：akshare连接中断
**解决方案：**
- 使用Tushare token
- 或等待一段时间后重试

### 问题2：yfinance被限流
**解决方案：**
- 使用Tushare token（推荐）
- 或增加等待时间后重试

### 问题3：所有数据源都失败
**解决方案：**
- 检查网络连接
- 确认数据源服务是否正常
- 考虑使用Tushare等付费但更稳定的服务

---

## 总结

**强烈推荐使用Tushare**，虽然需要注册，但：
- 免费版即可满足需求
- 数据稳定可靠
- 避免频繁的网络错误
- 提高系统可用性

注册地址：https://tushare.pro/register?reg=1

