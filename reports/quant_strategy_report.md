# 量化策略回测记录（2024-2025）

## 策略概要
- 品种：以指定 ticker 的日线数据为输入（优先 `akshare`，回退 `yfinance`）。
- 规则：
  1. 先过滤被包含/包含前一根的 K 线，只保留“有效”走势点；
  2. 若当前高点突破上一根有效 K 线高点，且空仓，则满仓买入；
  3. 若持仓期间当前低点跌破上一根有效 K 线低点，则清仓；
  4. 被包含的 K 线不参与后续判断，保证参考点干净。
- 初始资金：1,000,000（等值于标的币种）；杠杆与手续费忽略，用以比较策略风格。

## 数据与脚本
- 脚本：`python_learn/quant_strategy.py`
- 运行方式示例：
  ```bash
  python3 python_learn/quant_strategy.py --ticker 9880.HK --start 2024-01-01 --end 2025-12-31
  ```
- 可选参数：`--csv`（本地数据）、`--capital`（初始资金）、`--start/--end`（回测区间）、`--ticker`（yfinance 或 akshare 代码）。

## 回测结果汇总
| 标的 | 代码 | 有效K线 / 忽略占比 | 买入 / 卖出次数 | 期末权益 | 两年收益 | 备注 |
| --- | --- | --- | --- | --- | --- | --- |
| 优必选 | 9880.HK | 476 / 39.92% | 60 / 59 | 3,109,708.80 | **+210.97%** | 多次大级别突破（特别是 2025 年 Q3）带来复利；高波动，高换手 |
| 中国光大控股 | 0165.HK | 476 / 40.13% | 56 / 55 | 2,548,857.37 | **+154.89%** | 长期慢牛，策略在 2024 年底与 2025 年中抓住上升段 |
| 众安在线 | 6060.HK | 476 / 30.67% | 61 / 60 | 1,830,333.76 | **+83.03%** | 结构性行情明显；多次突破后回吐，仍显著盈利 |
| 李宁 | 2331.HK | 476 / 25.63% | 70 / 70 | 1,773,394.55 | **+77.34%** | 中期波段较多，换手高；2025 年高位震荡导致收益回落 |
| 德林控股 | 1709.HK | 476 / 55.04% | 49 / 49 | 896,317.05 | **−10.37%** | 长期横盘且波动小，忽略比例高，反复止损造成亏损 |
| 瑞声科技 | 2018.HK | 476 / 30.67% | 77 / 77 | 1,582,335.69 | **+58.23%** | 2024-2025 多段趋势，策略捕捉中度上涨 |
| 国泰君安国际 | 1788.HK | 476 / 42.86% | 61 / 61 | 5,527,128.53 | **+452.71%** | 2025 年极端暴涨导致收益爆发，也揭示高回撤风险 |
| 趣致集团* | 0917.HK | 126 / 41.27% | 12 / 11 | 934,178.48 | **−6.58%** | 仅有 2025 年日线；最后一笔仍持仓，收益参考性较弱 |
| 昭衍新药 | 688356.SS | 467 / 34.69% | 61 / 61 | 1,026,836.11 | **+2.68%** | 2024 年震荡，2025 年虽有波段但多次追高回落，导致小幅正收益 |

> *趣致集团（00917.HK）2024 年缺失日线数据，回测只覆盖 2025 年，表格中已注明。

## 优化建议
1. **趋势/波动过滤**：结合均线（如价格需位于 50 日均线上方）或 ATR 阈值，剔除噪声突破，可显著减少交易次数。
2. **分批建仓与动态止损**：以 ATR 作为步长设置止损/止盈，或采用半仓首买、突破确认再加仓策略，降低一次交易的成本占比。
3. **冷却期 & 信号降频**：卖出后强制等待 N 天、或者仅在每周/每月固定窗口评估，避免短期震荡导致的高换手。

## 关键术语：ATR
- **真实波动幅度（TR）**：当日 `max(高-低, |高-前收|, |低-前收|)`。
- **ATR**：TR 的滑动平均（常用 14 天），衡量最近波动强度。大 ATR 代表波动剧烈，可用于动态止损或突破确认。

## 文件与数据
- 脚本：`python_learn/quant_strategy.py`
- 报表：`reports/quant_strategy_report.md`（本文件）
- 聊天摘要：`reports/chat_summary.md`

---
如需继续添加新标的或导出 CSV，可运行脚本并将 `--ticker` 指定为目标代码。